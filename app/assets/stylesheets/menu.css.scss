$cloudi-navbar-bg: #405570;
$cloudi-navbar-border: darken($cloudi-navbar-bg, 10%);
$cloudi-navbar-text: #FFFFFF;
$cloudi-menu-bg: #E0E0E5;
$cloudi-menu-border: darken($cloudi-menu-bg, 10%);
$cloudi-menu-width: 250px;
$cloudi-menu-text: #404040;
$cloudi-usercard-size: 48px;

$cloudi-navbar-border-width: 5px;
$cloudi-navbar-height-mobile: 48px;

navbar {
    position: fixed;
    z-index: 1;

    .menu-link-list {
        background: $cloudi-menu-bg;
        padding: 0;
        margin: 0;
        list-style-type: none;

        li {
            display: inline;

            &:last-child a {
                // border-bottom-width: 0;
            }
        }

        a {
            display: block;
            padding: 10px;
            border-bottom: 1px solid $cloudi-menu-border;
            color: $cloudi-menu-text;

            &:hover {
                background-color: $cloudi-menu-border;
            }
        }
    }
}

.user-card {
    .user-card-front {
        display: block;
        height: $cloudi-usercard-size;
        overflow: hidden;
        border-bottom: 1px solid $cloudi-menu-border;

        .user-card-picture {
            height: $cloudi-usercard-size;
            width: $cloudi-usercard-size;
            display: inline-block;
            vertical-align: middle;

            background: {
                size: contain;
                repeat: no-repeat;
                position: left center;
            }
        }

        .user-card-identity {
            display: inline-block;
            vertical-align: middle;
            margin-left: 10px;
        }
    }
}

@media #{$medium-down} {
    body {
        padding-top: $cloudi-navbar-height-mobile + 5px;
    }

    navbar {
        display: block;
        border-bottom: $cloudi-navbar-border-width solid $cloudi-navbar-border;
        background-color: $cloudi-navbar-bg;
        top: 0;
        left: 0;
        width: 100%;
        position: absolute;
        height: $cloudi-navbar-height-mobile;

        .cloudi-logo {
            display: inline-block;
            vertical-align: middle;
            color: $cloudi-navbar-text;
            padding: 2px 10px;
            line-height: $cloudi-navbar-height-mobile - 4;
        }

        .menu-link-list {
            position: fixed;
            top: $cloudi-navbar-height-mobile;
            bottom: 0;
            border-bottom: $cloudi-navbar-border-width solid $cloudi-navbar-bg;

            width: 100%;
            // max-height: 80%;
            overflow-y: auto;

            display: none;
        }

        &.expanded {
            position: fixed;

            .menu-link-list {
                display: block;
            }
        }

        .menu-expander {
            display: inline-block;
            height: $cloudi-navbar-height-mobile;
            vertical-align: middle;
            width: $cloudi-navbar-height-mobile;
            line-height: $cloudi-navbar-height-mobile - 4;
            font-size: $cloudi-navbar-height-mobile / 2;
            padding: 2px 0;
            float: right;
            text-align: center;
            color: $cloudi-navbar-text;

            span {
                display: none;
            }

            @include glyph('\f0c9');

            &:hover {
                background-color: rgba(255, 255, 255, 0.1);
            }
        }
    }

    .user-card {
        display: block;

        .user-card-back {
            border-bottom: 1px solid $cloudi-menu-border;

            ul {
                padding: 0;
                margin: 0;

                li {
                    padding: 0;
                    margin: 0;
                }
            }
        }
    }
}

@media #{$small-only} {
    .user-card {
        .user-card-back {
            display: table;
            width: 100%;

            ul {
                display: table-row;
                table-layout: fixed;

                li {
                    display: table-cell;
                    width: auto;

                    a {
                        border-bottom-width: 0;
                        line-height: $cloudi-navbar-height-mobile - 4;
                        font-size: $cloudi-navbar-height-mobile / 2;
                        padding: 0;
                        margin: 0;
                        text-align: center;

                        span {
                            display: none;
                        }
                    }
                }
            }
        }
    }
}

@media #{$medium-only} {
    .user-card {
        border-bottom: 1px solid $cloudi-menu-border;
        height: $cloudi-navbar-height-mobile;

        .user-card-front {
            display: inline-block;
            border-bottom-width: 0;
        }

        .user-card-back {
            display: inline-block;
            float: right;
            border-bottom-width: 0;

            ul {
                display: inline;

                li {
                    display: inline-block;
                    width: $cloudi-navbar-height-mobile;
                    height: $cloudi-navbar-height-mobile;
                    text-align: center;

                    a {
                        line-height: $cloudi-navbar-height-mobile;
                        font-size: $cloudi-navbar-height-mobile / 2;
                        padding: 0;
                        margin: 0;
                        border-bottom-width: 0;
                        height: $cloudi-navbar-height-mobile;

                        span { display: none; }
                    }
                }
            }
        }
    }
}

@media #{$large-up} {
    body {
        margin-left: $cloudi-menu-width + 5px;
    }
    navbar {
        display: block;
        width: $cloudi-menu-width;
        background: $cloudi-menu-bg;
        height: 100%;
        top: 0;
        left: 0;
        border-right: $cloudi-navbar-border-width solid $cloudi-menu-border;

        .cloudi-logo {
            margin: 20px 0 50px 0;
            text-align: center;
            display: block;
            color: #123456;

            &:before {
                content: '';
                display: block;
                height: 100px;
                background: {
                    image: url(asset_path('cloudiversity.svg'));
                    position: center center;
                    repeat: no-repeat;
                    size: 75%;
                }
            }
        }

        .menu-link-list {
            a {
                border-bottom-width: 0;
                border-right: 0px solid $cloudi-navbar-border;
                padding: 5px 10px;
                transition: padding-left 0.5s,
                    background-color 0.5s;

                &:hover {
                    background-color: lighten($cloudi-menu-bg, 10%);
                    border-right-width: $cloudi-navbar-border-width;
                    padding-left: 15px;
                    margin-right: -$cloudi-navbar-border-width;
                }
            }
        }

        .menu-expander {
            display: none;
        }
    }

    .user-card {
        display: block;
        height: $cloudi-navbar-height-mobile;
        border-top: 1px solid $cloudi-menu-border;
        margin-bottom: 10px;

        .user-card-front {
            font-size: 90%;
        }

        .user-card-back {
            display: table;
            height: $cloudi-navbar-height-mobile - 1;
            margin-top: -$cloudi-navbar-height-mobile;
            background-color: lighten($cloudi-menu-bg, 15%);
            width: $cloudi-menu-width;
            border-right: $cloudi-navbar-border-width solid #123456;
            margin-right: -$cloudi-navbar-border-width;
            opacity: 0;
            transition: opacity 0.4s;

            // Weird bug with background :/
            position: absolute;

            ul {
                display: table-row;
                table-layout: fixed;
                width: 100%;
                height: 100%;

                li {
                    display: table-cell;

                    a {
                        display: block;
                        height: $cloudi-navbar-height-mobile - 1;
                        padding: 0;
                        margin: 0;
                        line-height: $cloudi-navbar-height-mobile;
                        font-size: $cloudi-navbar-height-mobile / 2;
                        text-align: center;
                        color: lighten($cloudi-menu-text, 20%);

                        span { display: none; }

                        &:hover {
                            border-right-width: 0;
                            margin-right: 0;
                            padding-left: 0;
                            background-color: transparent;
                            color: $cloudi-menu-text;
                        }
                    }
                }
            }
        }

        &:hover .user-card-back {
            opacity: 1;
        }
    }
}
